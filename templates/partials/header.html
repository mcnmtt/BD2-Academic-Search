<header style="background-color: #e4e5e0; margin-bottom: 20px; position: sticky; top: 0; z-index: 1000; height: 100px; overflow: hidden;" class="shadow-sm">

  <style>
    .header-search-box {
      display: flex;
      align-items: center;
      background: white;
      padding: 0; /* Rimosso padding interno per evitare overflow */
      border-radius: 50px;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.1);
      overflow: hidden; /* Previene sbordamenti */
      height: 42px; /* Altezza uniforme */
    }

    .header-search-box input {
      border: none;
      outline: none;
      flex: 1;
      font-size: 0.95rem;
      padding: 0 16px;
      background: none;
      height: 100%; /* Riempie tutta l'altezza */
    }

    .header-search-box button {
      background-color: #0066cc;
      color: white;
      padding: 0 16px; /* Solo padding orizzontale */
      border: none;
      height: 100%; /* Allinea verticalmente con l'input */
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: background 0.2s ease;
      border-radius: 0 50px 50px 0; /* Solo angoli a destra */
    }

    .header-search-box button:hover {
      background: #0050a0;
    }

    .btn-custom-login {
      background-color: #0066cc;
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      text-decoration: none;
      transition: background 0.3s;
    }

    .btn-custom-login:hover {
      background-color: #004c99;
    }

    .btn-custom-logout {
      background-color: #cc0000;
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      text-decoration: none;
      transition: background 0.3s;
    }

    .btn-custom-logout:hover {
      background-color: #990000;
    }
  </style>

  <div class="container-fluid h-100 d-flex align-items-center justify-content-between">

    <!-- COLONNA SINISTRA: Search bar integrata -->
    <form action="/search" method="get" class="header-search-box" style="max-width: 300px; width: 100%;">
      <input type="text" name="q" placeholder="Search by title, author or category" required>
      <button type="submit">Search</button>
    </form>

    <!-- COLONNA CENTRALE: Logo sempre centrato -->
    <a href="/" class="text-decoration-none d-flex align-items-center h-100">
      <img src="{{ url_for('static', filename='logo.svg') }}" alt="BDÂ² Logo"
           style="max-height: 100%; object-fit: contain;">
    </a>

    <!-- COLONNA DESTRA: Login/Logout -->
    <div style="width: 300px;" class="d-flex justify-content-end align-items-center">
      {% if session.admin %}
        <span class="me-3 text-success fw-bold">Logged as Admin</span>
        <a href="/logout" class="btn-custom-logout">Logout</a>
      {% else %}
        <a href="/login" class="btn-custom-login">Login</a>
      {% endif %}
    </div>

  </div>
</header>
